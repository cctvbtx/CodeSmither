<?xml version="1.0"?>
<!DOCTYPE service SYSTEM "./api-doc-source/api-doc.dtd">
<service name="装修APP 服务接口" basePath="http://192.168.1.254:10000/api/ios.ashx">
    <description>
        接入简单、异常监控&#x000A; 完善的机制、丰富的接口
    </description>
    <header name="token" type="string" description="登录接口返回的Token，用于保持登录状态不过期"/>
    <module name="接口说明">
        <apidescription name="接口访问">
            <![CDATA[
            本服务所有接口都已 Post 方式访问，发送的参数包括：头部（Header）,参数（Url）,实体（Body）。返回数据都是 Json格式
            <br/><br/>
            <li><b>发送-头部（Header）</b>：</li>
                <p>主要用于保持登录 的 token，作用在于当Cookie和Session失效之后，继续生成新的Cookie</p>
            <br/>
            <li><b>发送-参数（Url）</b>：</li>
                <p>目前用于发送分页参数 page（当前页数，0开始），pageSize（分页大小）</p>
                <p>例如：</p>
                <code>url?page=1&amp;pageSize=20</code>
            <br/>
            <li><b>发送-实体（Body）</b>：</li>
                <p>除了分页参数，一般其他数据都是以实体（Body）的Form格式发送</p>
            <br/>
            <li><b>返回-实体（Body）</b>：Json</li>
                <p>最外层格式都有 success，data，msg</p>
                <pre><code>{
    success:true, //true 表示成功 否则 data 为null msg 可以获取错误信息
    data:{}, //根据不同接口有不同的数据格式
    msg:"", //字符串格式，如：密码错误
}</code></pre>
            ]]>
        </apidescription>
        <apidescription name="登录保持">
            调用登录接口之后，服务器会返回一个 Set-Cookie ，客户端必须把 Cookie 保存下来，在之后的接口中发送到服务器，才能保持登录会话。

            由于 Cookie 和 Session 会在短时间内过期，客户端也必须保存下 服务站在登录接口中返回的 Token ，之后一起发送到服务器，
            可以在 Session 过期的时候继续创建新的 Cookie。
        </apidescription>
    </module>

    <module name="全局通用">
        <api name="用户登录" requestMethod="POST" path="?$c=User&amp;$m=Login$OPEN">
            <description>
                返回值中的token很重要，要保存下载，在登录之后的所有接口的头部都要加上这个参数
            </description>
            <header name="token" type="cancel"/>
            <form name="username" description="账户" type="string"/>
            <form name="password" description="密码（未加密）" type="string"/>
            <response contentType="Json">
                <header name="token" type="string" description="登录接口返回的Token，用于保持登录状态不过期"/>
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                int Age;
                String Name;
                String Token;

                String Id ;/// 用户ID(自增),
                String UserName ;/// (原Id)	用户名,
                String NickName ;/// 昵称(没有指定随机生成),
                String Mail ;/// 邮箱,
                String QQ ;/// QQ号,
                String City ;/// 所在城市,
                String Address ;/// 详细地址,
                String Signature ;/// 签名,
                String HeadUrl ;/// 头像Url,
                String Password ;/// (原Pwd)	MD5密码,
                String PersonName ,/// 姓名【住建部标准】【按该人员证件上的姓名填写】,
                int SexNum ,
                String Mobile ,
                Date Birthday;///生日,
                }
                }
            </response>
        </api>
        <api name="图片上传" requestMethod="POST" path="?$c=ImageFile&#38;$m=Upload">
            <description>
                infoType 的枚举
                用户 = 10,
                服务 = 20,
                文章 = 30,
                工作日志 = 40,
                幻灯片 = 50,
                日记 = 60,
                咨询 = 70,
                回复 = 80,
                评价 = 90,
                签到签退 = 100,
                工人评价 = 110,
            </description>
            <param name="infoType" description="如果是用户头像：用户，如果是工作日志：工作日志" type="string"/>
            <param name="infoId" description="图片所属对象的ID，如用户ID，日志ID" type="string"/>
            <body contentType="Multipart">
                图片二进制文件
            </body>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:true
                }
            </response>
        </api>
    </module>

    <module name="用户相关">
        <api name="用户登录" requestMethod="POST" path="?$c=User&amp;$m=Login$OPEN">
            <description>
                返回值中的token很重要，要保存下载，在登录之后的所有接口的头部都要加上这个参数
            </description>
            <header name="token" type="cancel"/>
            <form name="username" description="账户" type="string"/>
            <form name="password" description="密码（未加密）" type="string"/>
            <response contentType="Json">
                <header name="token" type="string" description="登录接口返回的Token，用于保持登录状态不过期"/>
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                int Age;
                String Name;
                String Token;

                String Id ;/// 用户ID(自增),
                String UserName ;/// (原Id)	用户名,
                String NickName ;/// 昵称(没有指定随机生成),
                String Mail ;/// 邮箱,
                String QQ ;/// QQ号,
                String City ;/// 所在城市,
                String Address ;/// 详细地址,
                String Signature ;/// 签名,
                String HeadUrl ;/// 头像Url,
                String Password ;/// (原Pwd)	MD5密码,
                String PersonName ,/// 姓名【住建部标准】【按该人员证件上的姓名填写】,
                int SexNum ,
                String Mobile ,
                Date Birthday;///生日,
                }
                }
            </response>
        </api>
        <api name="用户注册" requestMethod="POST" path="?$c=User&amp;$m=Regist$OPEN">
            <form name="username" description="账户" type="string"/>
            <form name="password" description="密码（未加密）" type="string"/>
            <form name="nickname" description="昵称" type="string"/>
            <form name="verifycode" description="手机验证码" type="string"/>
            <response contentType="Json">
                <header name="token" type="string" description="登录接口返回的Token，用于保持登录状态不过期"/>
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{

                int Age;
                String Name;
                String Token;

                String Id ;/// 用户ID(自增),
                String UserName ;/// (原Id)	用户名,
                String NickName ;/// 昵称(没有指定随机生成),
                String Mail ;/// 邮箱,
                String QQ ;/// QQ号,
                String City ;/// 所在城市,
                String Address ;/// 详细地址,
                String Signature ;/// 签名,
                String HeadUrl ;/// 头像Url,
                String Password ;/// (原Pwd)	MD5密码,
                Boolean MailVerified ;/// 邮箱是否验证 ：true 已验证，false 未验证,
                Boolean MobileVerified ;/// 手机是否验证：true 已验证，false 未验证,
                /// 证件类型【住建部标准】【参见DataCommon.TypeCode=enum_data_dic_type.人员证件类型(如果有身份证必须选择身份证)】,
                String IDCardTypeNum ,
                /// 证件号码【住建部标准】【按该人员证件类型对应的号码填写，如身份证按18位公民身份证号码填写，军官证按照军官证号码填写，护照按照护照号码填写】,
                String IDCard ,
                /// 姓名【住建部标准】【按该人员证件上的姓名填写】,
                String PersonName ,
                /// 性别【住建部标准】【参见DataCommon.TypeCode=enum_data_dic_type.性别，可选值：0男，1女】,
                String SexNum ,
                /// 手机号码【住建部标准】【指该人员对外联系用的手机号码(11位数字)】,
                String Mobile ,
                Date Birthday;///生日,

                float ServiceScoreTotal;/// 来自雇主的评价总分数,
                float ServiceScoreAvg;/// 来自雇主的评价总分数,
                int ServiceEvaluateTimes;/// 来自雇主的评价次数,
                float EmployerScoreTotal;/// 来自员工的评价总分数,
                float EmployerScoreAvg;/// 来自员工的评价总分数,
                int EmployerEvaluateCount;/// 来自员工的评价次数,

                String WorkPlace ;      /// 工作地点,
                int WorkPlaceRadius ;/// 工作地点半径（米）,
                WorkPlaceBaiduLngLat; /// 工作地点 GPS,
                Geometry:{
                int CoordinateSystemId = 0,
                String WellKnownText //GPS,
                }
                }
                }
            </response>
        </api>
        <api name="修改资料" requestMethod="POST" path="?$c=User&amp;$m=Update">
            <form name="PersonName" description="昵称（姓名）" type="string" nullable="true"/>
            <form name="Address" description="地址" type="string" nullable="true"/>
            <form name="IDCard" description="身份证号" type="string" nullable="true"/>
            <form name="Mobile" description="手机好嘛" type="string" nullable="true"/>
            <form name="SexNum" description="性别" type="string" nullable="true"/>
            <form name="HeadUrl" description="头像地址" type="string" nullable="true"/>
            <form name="Age" description="年龄" type="int" nullable="true"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                }
                }
            </response>
        </api>
        <api name="修改密码" requestMethod="POST" path="?$c=User&amp;$m=ResetPassword">
            <form name="oldpwd" description="老密码（未加密）" type="string"/>
            <form name="newpwd" description="新密码（未加密）" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                }
                }
            </response>
        </api>
        <api name="注册验证" requestMethod="POST" path="?$c=User&amp;$m=SendVerificationCodeBeforeRegist$OPEN">
            <description>
                用户注册时发送手机验证码
            </description>
            <form name="mobile" description="手机号码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{}
                }
            </response>
        </api>
        <api name="重置密码" requestMethod="POST" path="?$c=User&amp;$m=ResetPwd$OPEN">
            <form name="mobile" description="手机号码" type="string"/>
            <form name="pwd" description="新密码（未加密）" type="string"/>
            <form name="verifycode" description="手机验证码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                }
                }
            </response>
        </api>
        <api name="重置验证" requestMethod="POST" path="?$c=User&amp;$m=SendVerificationCodeResetPwd$OPEN">
            <description>
                重置密码时发送手机验证码
            </description>
            <form name="mobile" description="手机号码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{}
                }
            </response>
        </api>
        <api name="找回验证" requestMethod="POST" path="?$c=User&amp;$m=VerifyResetPwdCode$OPEN">
            <description>
               找回密码页面点击验证按钮，发送手机号和验证码到服务器验证
            </description>
            <form name="mobile" description="手机号码" type="string"/>
            <form name="code" description="手机收到的验证码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{}
                }
            </response>
        </api>
        <api name="手机验证" requestMethod="POST" path="?$c=User&amp;$m=SendVerificationCodeResetPwd$OPEN">
            <description>
                修改手机时发送手机验证码
            </description>
            <form name="mobile" description="手机号码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{}
                }
            </response>
        </api>
        <api name="修改手机" requestMethod="POST" path="?$c=User&amp;$m=UpdateMobile">
            <form name="mobile" description="手机号码" type="string"/>
            <form name="code" description="手机收到的验证码" type="string"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{}
                }
            </response>
        </api>
    </module>

    <module name="首页展示">
        <api name="首页数据" path="?$c=Pager&amp;$m=GetHomeData$OPEN" requestMethod="POST">
            <description>
                获取APP顶部幻灯片和消息数量
            </description>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                MessageCount:0//我的消息数量,
                TaskCount:0//我的任务数量,
                Banners://顶部幻灯片[{
                String Title;// "标题",
                String ImageUrl;// "图片连接",
                }...],
                }
                }
            </response>
        </api>
        <api name="拜访列表" path="?$c=Pager&amp;$m=GetIndexVistiList" requestMethod="POST">
            <description>
                主页拜访列表
            </description>
            <param name="pageSize" description="分页大小" type="int"/>
            <param name="page" description="页数" type="int"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:[{
                String Id;      //拜访Id,
                String Target;    //拜访对象,
                String Address;  //拜访地点,
                Date Time;    //拜访日期,
                Visitor://拜访人员{
                String Id;      //用户Id,
                String Name;    //显示名称,
                String Avatar;  //用户头像,
                }
                }...]
                }
            </response>
        </api>
    </module>

    <module name="拜访相关">
        <api name="拜访列表" requestMethod="POST" path="?$c=Visit&amp;$m=GetList">
            <description>
                主页拜访列表
            </description>
            <param name="pageSize" description="分页大小" type="int"/>
            <param name="page" description="页数" type="int"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:[{
                String Id;      //拜访Id,
                String Target;    //拜访对象,
                String Address;  //拜访地点,
                Date Time;    //拜访日期,
                Visitor://拜访人员{
                String Id;      //用户Id,
                String Name;    //显示名称,
                String Avatar;  //用户头像,
                }
                }...]
                }
            </response>
        </api>
        <api name="拜访详情" requestMethod="POST" path="?$c=Visit&amp;$m=GetById">
            <form name="Id" type="string" description="Id"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                String Id;      //拜访Id,
                String Target;    //拜访对象,
                String Address;  //拜访地点,
                String Remark;  //拜访备注,
                Date Time;    //拜访日期,
                Visitor://拜访人员{
                String Id;      //用户Id,
                String Name;    //显示名称,
                String Avatar;  //用户头像
                },
                Location://定位信息（可能为null）{
                double latitude,
                double longitude
                }
                }
                }
            </response>
        </api>
        <api name="添加拜访" requestMethod="POST" path="?$c=Visit&amp;$m=Submit">
            <description>
                主页拜访列表
            </description>
            <form name="Target" description="拜访对象" type="string"/>
            <form name="Address" description="拜访地点" type="string"/>
            <form name="DateTime" nullable="true" type="string" description="拜访时间（yyyy-MM-dd HH:mm）"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <form name="latitude" nullable="true" type="double" description="定位信息"/>
            <form name="longitude" nullable="true" type="double" description="定位信息"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
    </module>

    <module name="考情打卡">
        <api name="打卡签到" requestMethod="POST" path="?$c=Signed&amp;$m=Signin">
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://签到ID
                }
            </response>
        </api>
        <api name="打卡签退" requestMethod="POST" path="?$c=Signed&amp;$m=Signout">
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://签到ID
                }
            </response>
        </api>
        <api name="打卡统计" requestMethod="POST" path="?$c=Pager&amp;$m=StatisticsAttendanceByMonth" >
            <description>
                按月统计考勤
            </description>
            <form name="month" type="string" description="统计月份(yyyy-MM-01 00:00)" />
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                    int AbsenceClock;//缺卡(次),
                    int Absenteeism;//旷工（天）,
                    int AttendanceDay;//出勤天数（天）,
                    int NormalClock;//正常打卡（天）,
                    int LeaveEarly;//早退(次),
                    int BeLate;//迟到(次),
                    int Evection;//出差(小时),
                    int Visit;//外出(次),
                    int Rest;//休息(小时),
                    int vacate;//请假(小时),
                }
                }
            </response>
        </api>
    </module>

    <module name="审批相关">
        <api name="待我审批" requestMethod="POST" path="?$c=Approval&amp;$m=GetMyPendingList">
            <description>
                获取带我审批的列表
            </description>
            <param name="pageSize" description="分页大小" type="int"/>
            <param name="page" description="页数" type="int"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:[{
                string Id ;//Id,
                string Name ;//申请名称,
                string Content ;//申请内容,
                DateTime Time ;//申请时间,
                int Type;//类型 请假 = 1;休息 = 2;出差 = 3;报销 = 4;物品领用 = 5;通用申请 = 15,
                int Status ;//状态 未审批 = 1；审批通过 = 2；审批不通过 = 3,
                Applicant://申请人{
                String Id;      //用户Id,
                String Name;    //显示名称,
                String Avatar;  //用户头像,
                }
                }...]
                }
            </response>
        </api>
        <api name="拜访详情" requestMethod="POST" path="?$c=Approval&amp;$m=GetById">
            <form name="Id" type="string" description="Id"/>
            <response contentType="Json">
                {
                success:0 //true 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data:{
                String Id;      //拜访Id,
                String Target;    //拜访对象,
                String Address;  //拜访地点,
                String Remark;  //拜访备注,
                Date Time;    //拜访日期,
                Visitor://拜访人员{
                String Id;      //用户Id,
                String Name;    //显示名称,
                String Avatar;  //用户头像
                },
                Location://定位信息（可能为null）{
                double latitude,
                double longitude
                }
                }
                }
            </response>
        </api>
        <api name="申请请假" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyVacate">
            <description>
                请假类别:
                事假 = 1,
                病假 = 2,
                产假 = 3,
                婚假 = 4,
                丧假 = 5,
                年假 = 6,
                公假 = 7,
            </description>
            <form name="Type" description="请假类别" type="int"/>
            <form name="StartTime" type="string" description="开始时间（yyyy-MM-dd HH:mm）"/>
            <form name="EndTime" type="string" description="结束时间（yyyy-MM-dd HH:mm）"/>
            <form name="Duration" type="float" description="请假时长（单位为小时）"/>
            <form name="Reason" type="string" description="请假事由（最长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
        <api name="申请休息" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyRest">
            <form name="StartTime" type="string" description="开始时间（yyyy-MM-dd HH:mm）"/>
            <form name="EndTime" type="string" description="结束时间（yyyy-MM-dd HH:mm）"/>
            <form name="Duration" type="float" description="请假时长（单位为小时）"/>
            <form name="Reason" type="string" description="请假事由（最长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
        <api name="申请出差" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyEvection">
            <form name="Address" description="出差地点（最大长度100）" type="string"/>
            <form name="StartTime" type="string" description="开始时间（yyyy-MM-dd HH:mm）"/>
            <form name="EndTime" type="string" description="结束时间（yyyy-MM-dd HH:mm）"/>
            <form name="Duration" type="float" description="请假时长（单位为小时）"/>
            <form name="Reason" type="string" description="请假事由（最大长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
        <api name="申请报销" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyPayment">
            <description>
                报销类别:
                差旅费 = 1,//火车票、飞机票、长途汽车票、订票费发票、住宿费发票、餐饮发票、打车票、地铁票、加油费、过路过桥费、租车费
                招待费 = 2,//餐饮业发票、住宿费发票、打车票、礼品发票、食品费
                车辆费 = 3,//加油费发票、过路过桥费发票、停车费发票、修理费发票（带明细）、保养费（带明细）、车辆保险
                培训费 = 4,//培训费发票、培训费收据（国家机关事业单位专用）、资料费发票。
                电话费 = 5,//电话费发票、手机费发票。
                网络费 = 6,//网络费发票、网络服务发票。
                咨询费 = 7,//咨询费发票（含咨询报告）。
                会议费 = 8,//会议费发票（会议决议）
                运输费 = 9,//运输业专用发票、装卸费发票。
                办公品 = 10,//办公用品发票（带明细）。
                劳保费 = 11,//劳保用品发票。
                邮寄费 = 12,//邮电业专用发票、服务业发票。
                宣传费 = 13,//广告费发票（合同）
                制作费 = 14,//增值税专用发票（带合同）
            </description>
            <form name="Type" description="报销类别" type="int"/>
            <form name="JinE" description="报销金额（单位为元）" type="float"/>
            <form name="Detail" type="string" description="报销明细（最大长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
        <api name="申请物品" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyGoods">
            <form name="YongTu" description="物品领用用途（最大长度200）" type="string"/>
            <form name="Name" description="物品领用名称" type="float"/>
            <form name="Amounts" description="物品领用数量" type="int"/>
            <form name="Reason" type="string" description="物品领用事由（最大长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
        <api name="通用申请" requestMethod="POST" path="?$c=Approval&amp;$m=ApplyCommon">
            <form name="Content" description="申请内容（最大长度200）" type="string"/>
            <form name="Reason" type="string" description="申请原因（最大长度500）"/>
            <form name="ApproverId" description="审批人Id" type="string"/>
            <form name="Id" nullable="true" type="string" description="指定Id"/>
            <response contentType="Json">
                {
                success:0 //0 表示成功 否则 data 为null msg 可以获取错误信息,
                msg:"",
                data://新的Id,
                }
            </response>
        </api>
    </module>

</service>